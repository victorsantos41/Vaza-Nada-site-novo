<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora VazaNada</title>
</head>

<body>
    <h1>Bem vindo!</h1>

    <h2>Preencha os campos abaixo para estimar sua economia utilizando a solu√ß√£o da <b>VZ<span style="color: #5CE1E6;">ND</span></b>:</h2>

    Quantos vazamentos voc√™ teve nos ultimos 12 meses em gasodutos?<br>
    <input type="number" id="ipt_qtdVazamentos"> <br> <br>

<!-- Talvez modificar para ser solicitado uma m√©dia ao inv√©s do maior e do menor -->

    Qual foi a maior quantidade de g√°s que voc√™ j√° perdeu em uma hora de vazamento? (Em m¬≥/h)<br>
    <input type="number" id="ipt_maiorVazamento"> <br> <br>

    Qual foi a menor quantidade de g√°s que voc√™ j√° perdeu em uma hora de vazamento? (Em m¬≥/h)<br>
    <input type="number" id="ipt_menorVazamento"> <br> <br>

    Qual foi o maior tempo de detec√ß√£o de um vazamento? (Em minutos)<br>
    <input type="number" id="ipt_maiorTempo"> <br> <br>

    Qual foi o menor tempo de detec√ß√£o de um vazamento? (Em minutos)<br>
    <input type="number" id="ipt_menorTempo"> <br> <br>
    
    Quanto custa o m¬≥ do g√°s? (Em reais)<br>
    <input type="number" id="ipt_custo_gas"> <br> <br>
    

    <button onclick="calcular()">Calcular</button>

    <br>
    <br>

    <div id="div_mensagem"></div>
</body>

</html>

<script>
    function calcular() {
        var qtdVazamentos = Number(ipt_qtdVazamentos.value);
        var maiorVazamento = Number(ipt_maiorVazamento.value);
        var menorVazamento = Number(ipt_menorVazamento.value);
        var maiorTempo = Number(ipt_maiorTempo.value) / 60; // Convers√£o de min para horas
        var menorTempo = Number(ipt_menorTempo.value) / 60; // Convers√£o de min para horas
        var custoGasMCubico = Number(ipt_custo_gas.value);

        /*
            Verifica√ß√£o das condi√ß√µes de entrada:
            - Se qualquer valor for 0, exibe um alerta para preencher todos os campos.
            - Se qualquer valor for negativo, exibe um alerta dizendo que os valores n√£o podem ser negativos.
            - Se o maior vazamento for menor que o menor vazamento, exibe um alerta.
            - Se o maior tempo for menor que o menor tempo, exibe um alerta.
        */

        /*
            Explica√ß√£o do funcionamento do else if:
            - O else if √© usado para verificar m√∫ltiplas condi√ß√µes em sequ√™ncia.
            - Se a condi√ß√£o do if for falsa, o c√≥digo verifica a condi√ß√£o do primeiro else if.
            - Se a condi√ß√£o do primeiro else if for falsa, o c√≥digo verifica a condi√ß√£o do pr√≥ximo else if, e assim por diante.
            - Se todas as condi√ß√µes forem falsas, o bloco de c√≥digo dentro do else √© executado.
            - Isso permite que voc√™ execute diferentes blocos de c√≥digo dependendo de qual condi√ß√£o √© verdadeira.
        */
        if (qtdVazamentos == 0 || maiorVazamento == 0 || menorVazamento == 0 || maiorTempo == 0 || menorTempo == 0) {
            alert("Preencha todos os campos!");
        } else if (qtdVazamentos < 0 || maiorVazamento < 0 || menorVazamento < 0 || maiorTempo < 0 || menorTempo < 0) {
            alert("Os valores n√£o podem ser negativos!");
        } else if (maiorVazamento < menorVazamento) {
            alert("O maior vazamento n√£o pode ser menor que o menor vazamento!");
        } else if (maiorTempo < menorTempo) {
            alert("O menor tempo n√£o pode ser maior que o maior tempo!");

        } else {
            // M√©dia de quantidade de g√°s vazado por hora em um vazamento
            var mediaQuantidadeVazadoPorHora = (maiorVazamento + menorVazamento) / 2;
            // M√©dia de tempo para conter um vazamento em horas
            var mediaTempo = (maiorTempo + menorTempo) / 2;

            // M√©dia de perda por vazamento em m¬≥
            var mediaDePerdaPorVazamento = mediaQuantidadeVazadoPorHora * mediaTempo;
            // M√©dia de custo por vazamento
            var mediaDeCustoPorVazamento = mediaDePerdaPorVazamento * custoGasMCubico;

            // M√©dias de perda por vazamento em m¬≥ por ano e mes
            var mediaAnual = mediaDePerdaPorVazamento * qtdVazamentos;
            var mediaMensal = mediaAnual / 12;

            // M√©dias de custo por vazamento por ano e mes
            var mediaCustoAnual = mediaDeCustoPorVazamento * qtdVazamentos;
            var mediaCustoMensal = mediaCustoAnual / 12;


            /**
             * A solu√ß√£o da VZND reduz o tempo para conter vazamentos em at√© 90%
             * 
             * Os valores a baixo s√£o baseados na redu√ß√£o de 90% do tempo de conten√ß√£o de vazamentos
             * 
             * O custo de um vazamento passaria a ser de 10% do valor atual
             * 
             */


            // Medias de tempo para conten√ß√£o com desconto de 90% por vazamento
            var mediaTempoDesconto = mediaTempo * 0.1;

            var mediaDePerdaPorVazamentoDesconto = mediaQuantidadeVazadoPorHora * mediaTempoDesconto;
            var mediaCustoPorVazamentoDesconto = mediaDePerdaPorVazamentoDesconto * custoGasMCubico;

            var mediaCustoAnualDesconto = mediaCustoPorVazamentoDesconto * qtdVazamentos;
            var mediaCustoMensalDesconto = mediaCustoAnualDesconto / 12;




            div_mensagem.innerHTML = `
                    <b>Voc√™ perdeu aproximadamente:</b> 
                    <ul>
                        <li>üí∏ <b style="color: red">${mediaCustoAnual.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> nos √∫ltimos 12 meses.</li>
                        <li>üìÖ Uma m√©dia mensal de <b style="color: red">${mediaCustoMensal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b></li>
                        <li>üìâ Perdendo aproximadamente <b style="color: red">${mediaMensal.toLocaleString()} m¬≥ </b> de g√°s por m√™s</li>
                        <li>üîÑ Perdendo aproximadamente <b style="color: red">${mediaAnual.toLocaleString()} m¬≥</b> de g√°s por ano</li>
                    </ul>
                    
                    <b>Com a solu√ß√£o da VZ<span style="color: #5CE1E6">ND</span>, voc√™ poderia:</b>
                    <ul>
                        <li>‚è≥ A m√©dia de tempo atual que voc√™ leva para conter um vazamento √© de ${(mediaTempo * 60).toFixed(0)} minutos</li>
                        <li>‚ö° Voc√™ passaria a detectar um vazamento em at√© ${(mediaTempoDesconto * 60).toFixed(0)} minutos</li>
                        <li>‚è±Ô∏è Reduzindo o tempo para detectar vazamentos em at√© 90%</li>
                        <li>üí∞ Seu custo que antes era de ${mediaDeCustoPorVazamento.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} por vazamento, passaria a ser de ${mediaCustoPorVazamentoDesconto.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} por vazamento</li>
                    </ul>
                    
                    <b>Economia:</b>
                    <ul>
                        <li>üíµ Com a solu√ß√£o da <b>VZ<span style="color: #5CE1E6">ND</span><b>, voc√™ poderia <b style="color: green">economizar</b> aproximadamente <b style="color: green">${(mediaDeCustoPorVazamento - mediaCustoPorVazamentoDesconto).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> <b>por vazamento</b></li>
                        <li>üíµ Com a solu√ß√£o da <b>VZ<span style="color: #5CE1E6">ND</span><b>, voc√™ poderia <b style="color: green">economizar</b> aproximadamente <b style="color: green">${(mediaCustoMensal - mediaCustoMensalDesconto).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> <b>por m√™s</b></li>
                        <li>üíµ Com a solu√ß√£o da <b>VZ<span style="color: #5CE1E6">ND</span><b>, voc√™ poderia <b style="color: green">economizar</b> aproximadamente <b style="color: green">${(mediaCustoAnual - mediaCustoAnualDesconto).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</ b> <b>por ano</b></li>
                    </ul>
            `;

        }

    }
</script>