<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link  rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="shortcut icon" href="site\assets\icon\calculadoraFinanceira.ico" type="image/x-icon">
    <title>Calculadora VazaNada</title>
</head>

<body>
    <h1>Bem vindo!</h1>

    <h2>Preencha os campos abaixo para estimar sua economia utilizando a solu√ß√£o da <b>VZ<span style="color: #5CE1E6;">ND</span></b>:</h2>

    Quanto √© o seu consumo mensal de g√°s? (Em m¬≥)<br>
    <input type="number" id="ipt_consumoMensal"><br> <br>
    Quantos vazamentos voc√™ teve nos ultimos 12 meses em gasodutos?<br>
    <input type="number" id="ipt_qtdVazamentos"> <br> <br>

    Qual a m√©dia de quantidade de g√°s que voc√™ j√° perdeu em uma hora de vazamento? (Em m¬≥/h)<br>
    <input type="number" id="ipt_mediaVazamento"> <br> <br>

    Qual a m√©dia de tempo de detec√ß√£o de um vazamento? (Em minutos)<br>
    <input type="number" id="ipt_mediaTempo"> <br> <br>

    <button onclick="calcular()">Calcular</button>

    <br>
    <br>

    <div id="div_mensagem"></div>
</body>

</html>

<script>
    function calcular() {
        var consumoMensal = Number(ipt_consumoMensal.value)
        var qtdVazamentos = Number(ipt_qtdVazamentos.value);
        var mediaQuantidadeVazadoPorHora = Number(ipt_mediaVazamento.value);
        var mediaTempo = Number(ipt_mediaTempo.value)
        var custoGasMCubico = 4.9 ;

        /*
            Verifica√ß√£o das condi√ß√µes de entrada:
            - Se qualquer valor for 0, exibe um alerta para preencher todos os campos.
            - Se qualquer valor for negativo, exibe um alerta dizendo que os valores n√£o podem ser negativos.
            - Se o maior vazamento for menor que o menor vazamento, exibe um alerta.
            - Se o maior tempo for menor que o menor tempo, exibe um alerta.
        */

        /*
            Explica√ß√£o do funcionamento do else if:
            - O else if √© usado para verificar m√∫ltiplas condi√ß√µes em sequ√™ncia.
            - Se a condi√ß√£o do if for falsa, o c√≥digo verifica a condi√ß√£o do primeiro else if.
            - Se a condi√ß√£o do primeiro else if for falsa, o c√≥digo verifica a condi√ß√£o do pr√≥ximo else if, e assim por diante.
            - Se todas as condi√ß√µes forem falsas, o bloco de c√≥digo dentro do else √© executado.
            - Isso permite que voc√™ execute diferentes blocos de c√≥digo dependendo de qual condi√ß√£o √© verdadeira.
        */
        if (qtdVazamentos == 0 || mediaQuantidadeVazadoPorHora == 0 || mediaTempo == 0 || consumoMensal == 0) {
            Swal.fire({
                icon: "error",
                title: "Campos n√£o preenchidos",
                text: "Preencha todos os campos!",
                showClass: {
                popup: `
                    animate__animated
                    animate__fadeInUp
                    animate__faster
                        `
                },
                hideClass: {
                popup: `
                    animate__animated
                    animate__fadeOutDown
                    animate__faster
                       `
                },
            });
        } else if (qtdVazamentos < 0 || mediaQuantidadeVazadoPorHora < 0 || mediaTempo < 0 || consumoMensal < 0) {
            Swal.fire({
                icon: "error",
                title: "Campos negativados",
                text: "Algum campo est√° negativado, verifique as informa√ß√µes inseridas!",
                showClass: {
                popup: `
                    animate__animated
                    animate__fadeInUp
                    animate__faster
                        `
                },
                hideClass: {
                popup: `
                    animate__animated
                    animate__fadeOutDown
                    animate__faster
                       `
                },
            });
        } else {
            // M√©dia de quantidade de g√°s vazado por hora em um vazamento
            // M√©dia de tempo para conter um vazamento em horas
            // prejuizo √© em m√©dia de 1 a 5% do consumo mensal de g√°s nas empresas
            var prejuizoConsumoMensal = consumoMensal * 0.05
            // M√©dia de perda por vazamento em m¬≥
            var mediaDePerdaPorVazamento = mediaQuantidadeVazadoPorHora * mediaTempo;
            // M√©dia de custo por vazamento
            var mediaDeCustoPorVazamento = mediaDePerdaPorVazamento * custoGasMCubico;

            // M√©dias de perda por vazamento em m¬≥ por ano e mes
            var mediaAnual = mediaDePerdaPorVazamento * qtdVazamentos;
            var mediaMensal = mediaAnual / 12;

            // M√©dias de custo por vazamento por ano e mes
            var mediaCustoAnual = mediaDeCustoPorVazamento * qtdVazamentos;
            var mediaCustoMensal = mediaCustoAnual / 12;
            var mediaCustoTrimensal = mediaCustoAnual / 4;
            var mediaCustoSemestre = mediaCustoAnual / 2;


            /**
             * A solu√ß√£o da VZND reduz o tempo para conter vazamentos em at√© 90%
             * 
             * Os valores a baixo s√£o baseados na redu√ß√£o de 90% do tempo de conten√ß√£o de vazamentos
             * 
             * O custo de um vazamento passaria a ser de 10% do valor atual
             * 
             */


            // Medias de tempo para conten√ß√£o com desconto de 90% por vazamento
            var mediaTempoDesconto = mediaTempo * 0.1;

            var mediaDePerdaPorVazamentoDesconto = mediaQuantidadeVazadoPorHora * mediaTempoDesconto;
            var mediaCustoPorVazamentoDesconto = mediaDePerdaPorVazamentoDesconto * custoGasMCubico;

            var mediaCustoAnualDesconto = mediaCustoPorVazamentoDesconto * qtdVazamentos;
            var mediaCustoMensalDesconto = mediaCustoAnualDesconto / 12;
            var mediaCustoTrimensalDesconto = mediaCustoAnualDesconto / 4;
            var mediaCustoSemestreDesconto = mediaCustoAnualDesconto / 2;



            div_mensagem.innerHTML = `
                    <b>Voc√™ perdeu aproximadamente:</b> 
                    <ul>
                        <li>üí∏ <b style="color: red">${mediaCustoAnual.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> nos √∫ltimos 12 meses.</li>
                        <li>üìÖ Uma m√©dia mensal de <b style="color: red">${mediaCustoMensal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b></li>
                        <li>üìâ Perdendo aproximadamente <b style="color: red">${mediaMensal.toLocaleString()} m¬≥ </b> de g√°s por m√™s</li>
                        <li>üîÑ Perdendo aproximadamente <b style="color: red">${mediaAnual.toLocaleString()} m¬≥</b> de g√°s por ano</li>
                    </ul>
                    
                    <b>Com a solu√ß√£o da VZ<span style="color: #5CE1E6">ND</span>, voc√™ poderia:</b>
                    <ul>
                        <li>‚è≥ A m√©dia de tempo atual que voc√™ leva para conter um vazamento √© de ${(mediaTempo * 60).toFixed(0)} minutos</li>
                        <li>‚ö° Voc√™ passaria a detectar um vazamento em at√© ${(mediaTempoDesconto * 60).toFixed(0)} minutos</li>
                        <li>‚è±Ô∏è Reduzindo o tempo para detectar vazamentos em at√© 90%</li>
                        <li>üí∞ Seu custo que antes era de ${mediaDeCustoPorVazamento.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} por vazamento, passaria a ser de ${mediaCustoPorVazamentoDesconto.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} por vazamento</li>
                    </ul>
                    
                    <b>Economia:</b>
                    <ul>
                        <li><b>üíµ A partir de um ticket m√©dio de <b style="color: green">${(custoGasMCubico).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> por m¬≥, com a solu√ß√£o da </b> <b>VZ<span style="color: #5CE1E6">ND</span><b>, voc√™ poderia <b style="color: green">economizar</b> aproximadamente <b style="color: green">${(mediaDeCustoPorVazamento - mediaCustoPorVazamentoDesconto).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> <b>por vazamento</b></li>
                        <li>üíµ Com a solu√ß√£o da <b>VZ<span style="color: #5CE1E6">ND</span><b>, voc√™ poderia <b style="color: green">economizar</b> aproximadamente <b style="color: green">${(mediaCustoMensal - mediaCustoMensalDesconto).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> <b>por m√™s</b></li>
                        <li>üíµ Com a solu√ß√£o da <b>VZ<span style="color: #5CE1E6">ND</span><b>, voc√™ poderia <b style="color: green">economizar</b> aproximadamente <b style="color: green">${(mediaCustoTrimensal - mediaCustoTrimensalDesconto).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> <b>por trimestre</b></li>
                        <li>üíµ Com a solu√ß√£o da <b>VZ<span style="color: #5CE1E6">ND</span><b>, voc√™ poderia <b style="color: green">economizar</b> aproximadamente <b style="color: green">${(mediaCustoSemestre - mediaCustoSemestreDesconto).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</b> <b>por semestre</b></li>
                        <li>üíµ Com a solu√ß√£o da <b>VZ<span style="color: #5CE1E6">ND</span><b>, voc√™ poderia <b style="color: green">economizar</b> aproximadamente <b style="color: green">${(mediaCustoAnual - mediaCustoAnualDesconto).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</ b> <b>por ano</b></li>
                    </ul>

                    <br>

                    <button onclick="propaganda()">Clique aqui caso queira lucrar</button>
            `;

        }

    }

    function propaganda() {
        Swal.fire({
                icon: "info",
                title: "Contato",
                showCloseButton: true,
                showDenyButton: true,
                denyButtonColor: "#5CE1E6",
                denyButtonText: "Conhe√ßa mais sobre o projeto",
                confirmButtonText: "Enviar informa√ß√µes!",
                showClass: {
                popup: `
                    animate__animated
                    animate__fadeInUp
                    animate__faster
                        `
                },
                hideClass: {
                popup: `
                    animate__animated
                    animate__fadeOutDown
                    animate__faster
                       `
                },
                footer: '<a href="https://github.com/Robert1730/VazaNada" target="_blank">Clique aqui para j√° entrar em contato direto conosco</a>',
                html: `
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome"placeholder="Insira o nome da sua empresa" required/>
                    <br>

                    <label for="fone">Telefone:</label>
                    <input type="tel" id="fone"placeholder="(xx) xxxxx-xxxx"/>
                    <br>

                    <label for="email">Email:</label>
                    <input type="email" id="email" placeholder="Seu melhor email"/>
                
                    <br>
                    <textarea placeholder="Deixe sua mensagem"></textarea>
                    <br>

                    <fieldset class="checkbox">
                        <legend>Por onde devemos entrar em contato?</legend>
                      
                        <div>
                          <input type="checkbox" checked/>
                          <label>Email</label>
                        </div>
                      
                        <div>
                          <input type="checkbox"/>
                          <label>Telefone</label>
                        </div>
                      </fieldset>
                    `,

                    preConfirm: () => {
                    var nome = document.getElementById('nome').value;
                    var email = document.getElementById('email').value;
                    var fone = document.getElementById('fone').value;

        if (!nome || (!email && !fone)) {
            Swal.showValidationMessage('Por favor, preencha todos os campos obrigat√≥rios (nome e um desses dois campos: E-mail, Telefone) para podermos entrar em contato.');
            return false;
        }
        return { nome, email, fone };
    }
                    
                }).then((result) => {
    if (result.isDenied) {
        window.open("https://github.com/Robert1730/VazaNada", "_blank");
        return; 
    }

    if (result.isConfirmed) {
        Swal.fire({
            icon: "success",
            title: "Enviado",
            text: "Suas informa√ß√µes foram enviadas com sucesso, entraremos em contato em 24 horas √∫teis.",
            confirmButtonText: "Estarei no aguardo!",
            showCloseButton: true,
            showDenyButton: true,
            denyButtonColor: "#5CE1E6",
            denyButtonText: "Conhe√ßa mais sobre o projeto",
        }).then((result) => {
            if (result.isDenied) {
            window.open("https://github.com/Robert1730/VazaNada", "_blank");
            return; 
    }
        });
    }
});
  }
</script>

<!-- No bot√£o conhe√ßa mais sobre o projeto, levar para o site institucional futuramente -->
<!-- Estilizar a parte de fazer o formul√°rio -->